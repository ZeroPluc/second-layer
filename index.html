<script>
// Select all carousels
const carousels = document.querySelectorAll('.scroll-wrap');

carousels.forEach(carousel => {
  const items = carousel.querySelectorAll('.item');

  function updateCenter() {
    const carouselRect = carousel.getBoundingClientRect();
    let closestItem = null;
    let closestDistance = Infinity;

    items.forEach(item => {
      const itemRect = item.getBoundingClientRect();
      const itemCenter = itemRect.left + itemRect.width / 2;
      const carouselCenter = carouselRect.left + carouselRect.width / 2;
      const distance = Math.abs(carouselCenter - itemCenter);

      if (distance < closestDistance) {
        closestDistance = distance;
        closestItem = item;
      }
    });

    // Remove center from all, then add to closest
    items.forEach(item => item.classList.remove('center'));
    if (closestItem) closestItem.classList.add('center');
  }

  // Initial update
  updateCenter();

  // Update on scroll
  carousel.addEventListener('scroll', () => {
    requestAnimationFrame(updateCenter);
  });

  // Optional: update on resize
  window.addEventListener('resize', () => {
    requestAnimationFrame(updateCenter);
  });
});
</script>
